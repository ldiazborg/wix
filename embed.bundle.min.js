!function(){"use strict";function e(e,t){return`${e}-${t}`}function t(t,n,r){setTimeout(()=>{t.removeItem(e(n,r))},18e4)}function n(n,r,i){const o=new URLSearchParams(n.location.search);let s="",a=["utm_source","utmSource","utm_medium","utmMedium","utm_campaign","utmCampaign","utm_term","utmTerm","utm_content","utmContent"];for(let[n,c]of o.entries())s+=n+"="+c+",",a.includes(n)&&(r.setItem(e(n,i),c),t(r,n,i));let c=a.filter(e=>!o.has(e));for(let n of c)r.getItem(e(n,i))&&(s+=n+"="+r.getItem(e(n,i))+",",t(r,n,i));return s}function r(e){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e.userAgent)}function i(e,t){t.style.position="fixed",t.style.bottom="10px",t.style.right="10px",t.style.width="0px",t.style.height="0px",t.style.zIndex="2147483647",function(e,t){/Mobi/.test(navigator.userAgent)||(e.screen.width>=2560&&e.screen.height>=1920?(t.style.transform="scale(1.5)",t.style.transformOrigin="center center"):e.screen.width>=2048&&e.screen.height>=1536?(t.style.transform="scale(1.2)",t.style.transformOrigin="center center"):(t.style.transform="scale(1)",t.style.transformOrigin="center center"))}(e,t)}function o(e,t,n,r,i){null===t.data.placementHorizontal&&null===t.data.height||function(e,t,n){const{placementHorizontal:r,placementHorizontalOffset:i,placementVerticalOffset:o,width:s,height:a}=e.data;r&&(n=r),t.style.bottom=`${o}px`,"Center"===n?(t.style.left="0px",t.style.right="0px",t.style.margin="auto",t.style.transformOrigin="center bottom"):"Left"===n?(t.style.left=`${i}px`,t.style.right="none",t.style.margin="none",t.style.transformOrigin="left bottom"):(t.style.left="none",t.style.right=`${i}px`,t.style.margin="none",t.style.transformOrigin="right bottom"),(s||a)&&(t.style.width=s,t.style.height=a,"100%"===s&&"100%"===a&&(t.style.bottom="0",t.style.right="Left"!==n?"0":"none",t.style.left="Right"!==n?"0":"none",t.style.transformOrigin="center center"))}(t,n,r),(t.data.hs_gaID||t.data.hs_gaGTMID)&&i&&(!function(e){e.source.postMessage({hs_gaID:e.data.hs_gaID,hs_gaGTMID:e.data.hs_gaGTMID},"*")}(t),i=!1),t.data.hs_gaPageToOpen&&function(e,t){e.parent.document.getElementById("hswidget-ga-iframe").setAttribute("src",t.data.hs_gaPageToOpen)}(e,t),t.data.calledFunction&&function(e,t){const{calledFunction:n,functionParams:r}=t.data;try{if(console.info("Proceding to execute: ",n),"function"==typeof e[n])e[n](r);else{if("function"!=typeof e.parent[n])return void console.error(`Function ${n} not found`);e.parent[n](r)}console.info(`Function ${n} executed successfully`)}catch(e){console.warn(`An internal error occurred while executing ${n}:`,e)}}(e,t)}function s(e,t,s,a,c,l){const u=function(e){return e.parent!==e?new URL(e.parent.location.href):new URL(e.location.href)}(e),h=function(e){var t=e.protocol,n=e.hostname,r=e.pathname,i=t+"//"+n;return"/"!==r&&(i+=r),i}(u),m=function(e){var t=e.createElement("div");return t.id="hopesync_chatwidget_container",t}(t),g=function(e,t,i,o,s){return encodeURIComponent(JSON.stringify({referringSiteURL:e.location.href,referringPageName:e.document.title,previousPage:t.referrer,referringPageVariables:n(e,i,o),deviceScreenSizeSmallerDimension:Math.min(e.screen.width,e.screen.height),deviceScreenSizeLargerDimension:Math.max(e.screen.width,e.screen.height),deviceOS:s.platform,deviceBrowser:s.userAgent,deviceBrowserVersion:s.appVersion,isMobile:r(s)}))}(e,t,s,c,a);i(e,m);const d=function(e,t,n,r,i,o){var s=t.createElement("iframe"),a=function(e,t){var n=function(e){return e.parent!==e?e.parent.location.hostname:e.location.hostname}(e);return t?"https://chatinstantly.com":["hswidget-test.azurewebsites.net","hopesync.wpcomstaging.com","hopesync2.wpcomstaging.com"].includes(n)?"https://hswidget-test.azurewebsites.net":["hswidget-dev.azurewebsites.net"].includes(n)?"https://hswidget-dev.azurewebsites.net":"https://chatinstantly.com"}(e,r);return s.title="hopesync_chatwidget_iframe",s.src=`${a}/widget.html?chatId=${n}&domain=${i}&clientInfo=${o}&src=${a}`,s.style.width="100%",s.style.height="100%",s.style.border="none",s.style.backgroundColor="transparent",s}(e,t,c,l,h,g);return function(e,t){e.addEventListener("message",n=>{o(e,n,t,"Right",!0)})}(e,m),m.appendChild(d),m}class a extends HTMLElement{constructor(){super()}connectedCallback(){var e=this.getAttribute("chatid");this.appendChild(s(window,document,localStorage,navigator,e,!1))}}customElements.define("hs-chat-widget",a)}();
