!function(){"use strict";function e(e,t){return`${e}-${t}`}function t(t,n,r){setTimeout(()=>{t.removeItem(e(n,r))},18e4)}function n(n,r,i){const o=new URLSearchParams(n.location.search);let a="",s=["utm_source","utmSource","utm_medium","utmMedium","utm_campaign","utmCampaign","utm_term","utmTerm","utm_content","utmContent"];for(let[n,c]of o.entries())a+=n+"="+c+",",s.includes(n)&&(r.setItem(e(n,i),c),t(r,n,i));let c=s.filter(e=>!o.has(e));for(let n of c)r.getItem(e(n,i))&&(a+=n+"="+r.getItem(e(n,i))+",",t(r,n,i));return a}function r(e){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e.userAgent)}function i(e,t){t.style.position="fixed",t.style.bottom="10px",t.style.right="10px",t.style.width="0px",t.style.height="0px",t.style.zIndex="2147483647",function(e,t){/Mobi/.test(navigator.userAgent)||(e.screen.width>=2560&&e.screen.height>=1920?(t.style.transform="scale(1.5)",t.style.transformOrigin="center center"):e.screen.width>=2048&&e.screen.height>=1536?(t.style.transform="scale(1.2)",t.style.transformOrigin="center center"):(t.style.transform="scale(1)",t.style.transformOrigin="center center"))}(e,t)}function o(e,t,n,r,i){null===t.data.placementHorizontal&&null===t.data.height||function(e,t,n){const{placementHorizontal:r,placementHorizontalOffset:i,placementVerticalOffset:o,width:a,height:s}=e.data;r&&(n=r),t.style.bottom=`${o}px`,"Center"===n?(t.style.left="0px",t.style.right="0px",t.style.margin="auto",t.style.transformOrigin="center bottom"):"Left"===n?(t.style.left=`${i}px`,t.style.right="none",t.style.margin="none",t.style.transformOrigin="left bottom"):(t.style.left="none",t.style.right=`${i}px`,t.style.margin="none",t.style.transformOrigin="right bottom"),(a||s)&&(t.style.width=a,t.style.height=s,"100%"===a&&"100%"===s&&(t.style.bottom="0",t.style.right="Left"!==n?"0":"none",t.style.left="Right"!==n?"0":"none",t.style.transformOrigin="center center"))}(t,n,r),(t.data.hs_gaID||t.data.hs_gaGTMID)&&i&&(!function(e){e.source.postMessage({hs_gaID:e.data.hs_gaID,hs_gaGTMID:e.data.hs_gaGTMID},"*")}(t),i=!1),t.data.hs_gaPageToOpen&&function(e,t){e.parent.document.getElementById("hswidget-ga-iframe").setAttribute("src",t.data.hs_gaPageToOpen)}(e,t),t.data.calledFunction&&function(e,t){const{calledFunction:n,functionParams:r}=t.data;try{if(console.info("Proceding to execute: ",n),"function"==typeof e[n])e[n](r);else{if("function"!=typeof e.parent[n])return void console.error(`Function ${n} not found`);e.parent[n](r)}console.info(`Function ${n} executed successfully`)}catch(e){console.warn(`An internal error occurred while executing ${n}:`,e)}}(e,t)}function a(e,t,a,s,c,l){const d=function(e){return e.parent!==e?new URL(e.parent.location.href):new URL(e.location.href)}(e),u=function(e){var t=e.protocol,n=e.hostname,r=e.pathname,i=t+"//"+n;return"/"!==r&&(i+=r),i}(d),h=function(e){var t=e.createElement("div");return t.id="hopesync_chatwidget_container",t}(t),m=function(e,t,i,o,a){return encodeURIComponent(JSON.stringify({referringSiteURL:e.location.href,referringPageName:e.document.title,previousPage:t.referrer,referringPageVariables:n(e,i,o),deviceScreenSizeSmallerDimension:Math.min(e.screen.width,e.screen.height),deviceScreenSizeLargerDimension:Math.max(e.screen.width,e.screen.height),deviceOS:a.platform,deviceBrowser:a.userAgent,deviceBrowserVersion:a.appVersion,isMobile:r(a)}))}(e,t,a,c,s);i(e,h);const g=function(e,t,n,r,i,o){var a=t.createElement("iframe"),s=function(e,t){var n=function(e){return e.parent!==e?e.parent.location.hostname:e.location.hostname}(e);return t?"https://chatinstantly.com":["hswidget-test.azurewebsites.net","hopesync.wpcomstaging.com","hopesync2.wpcomstaging.com"].includes(n)?"https://hswidget-test.azurewebsites.net":["hswidget-dev.azurewebsites.net"].includes(n)?"https://hswidget-dev.azurewebsites.net":"https://chatinstantly.com"}(e,r);return a.title="hopesync_chatwidget_iframe",a.src=`${s}/widget.html?widgetId=${n}&domain=${i}&clientInfo=${o}&src=${s}`,a.style.width="100%",a.style.height="100%",a.style.border="none",a.style.backgroundColor="transparent",a}(e,t,c,l,u,m);return function(e,t){e.addEventListener("message",n=>{o(e,n,t,"Right",!0)})}(e,h),h.appendChild(g),h}if(window.hscw_alreadyLoaded)console.warn("The script for hschatwidget installation has already been loaded. Please remove the duplicate script tag.");else{window.hscw_alreadyLoaded=!0;var s=document.currentScript,c=s.dataset.widgetId,l="true"===s.dataset.prod;document.addEventListener("DOMContentLoaded",function(){var e=a(window,document,localStorage,navigator,c,l);document.body.appendChild(e)})}}();
